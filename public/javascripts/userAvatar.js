let errorMessage=document.createElement("div");function errorMessageHidden(e){e&&(e.style=null),errorMessage.hidden=!0}function errorMessagePosition(e,t,o){let n=e.getBoundingClientRect(),r=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop,d=(window.pageXOffset||document.documentElement||document.body.scrollLeft,document.documentElement.clientTop||document.body.clientTop||0);document.documentElement.clientLeft||document.body.clientLeft;errorMessage.style.left=n.left+"px",errorMessage.innerHTML=o,errorMessage.hidden=!1,"fileinfo"===t?errorMessage.style.top=n.top+r-d-50+"px":(e.style.border="2px solid #FF4328",e.style.background="#FFC4C3",errorMessage.style.top="post-body"===t?n.top+r-d-50+"px":n.top+r-d-e.offsetHeight-15+"px")}errorMessage.className="error-message",errorMessage.hidden=!0,document.body.appendChild(errorMessage),document.getElementById("show-add-img").onclick=(e=>{e.preventDefault(),document.getElementById("add-img-form").hidden=!document.getElementById("add-img-form").hidden}),document.getElementById("file").oninput=(e=>{e.preventDefault(),errorMessageHidden(null);let t=new FormData;t.append("userId",document.getElementById("user-id").value),t.append("file",e.target.files[0]);const o=new XMLHttpRequest;o.open("POST","/upload/avatar",!0),o.onreadystatechange=(()=>{if(4==o.readyState)if(200!=o.status)alert(`${o.status}: ${o.statusText}`);else{const e=JSON.parse(o.responseText);e.ok?location.reload():errorMessagePosition(document.getElementById("fileinfo"),"fileinfo",e.error)}}),o.send(t)});